syntax = "proto3";

package genai.common;

import "google/protobuf/struct.proto";

// 에러 심각도
enum ErrorSeverity {
  // Represents error severity unspecified.
  ERROR_SEVERITY_UNSPECIFIED = 0;
  // 정보성
  ERROR_SEVERITY_INFO = 1;
  // 경고
  ERROR_SEVERITY_WARNING = 2;
  // 에러
  ERROR_SEVERITY_ERROR = 3;
  // 치명적
  ERROR_SEVERITY_CRITICAL = 4;
}

// 에러 상세
message ErrorDetail {
  // 에러 코드 (예: "INVALID_DSL_SYNTAX")
  string code = 1;
  // 사용자 친화적 메시지
  string message = 2;
  // 심각도
  ErrorSeverity severity = 3;
  // 추가 메타데이터 (line, column 등)
  map<string, string> metadata = 4;
  // 에러 컨텍스트 (JSON 형태)
  google.protobuf.Struct context = 5;
}

// 검증 경고
message ValidationWarning {
  // 경고 메시지
  string message = 1;
  // 라인 번호 (해당 시)
  int32 line = 2;
  // 컬럼 번호 (해당 시)
  int32 column = 3;
  // 심각도
  ErrorSeverity severity = 4;
  // 해결 제안
  string suggestion = 5;
}

// 변환 경고 (IR Converter용)
message ConversionWarning {
  // 경고 메시지
  string message = 1;
  // 심각도
  ErrorSeverity severity = 2;
  // 역변환 가능 여부
  bool reversible = 3;
}
